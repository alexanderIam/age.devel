#### Задание: Проверка возраста

Для того, чтобы ограничить доступ к содержимому сайта лиц не достигших 18 лет необходимо реализовать всплывающее окно на черном фоне, на котором будет предлагаться посетителю ввести дату своего рождения и подтвердить возраст. Всплывающее окно должно быть на любой странице сайта.

В случае если посетитель ввел дату рождения и его возраст оказался больше 18 лет, всплывающее окно удаляется, записывается кука о том, что возраст проверен. Далее на протяжении всей сессии всплывающее окно проверки возраста не должно появляться.

Если пользователю меньше 18 лет, записывается кука о том, что возраст не подтвержден. Содержимое всплывающего окна должно изменится и содержать информацию о том, что доступ на сайт закрыт так как возраст не подтвержден. При перезагрузке страницы окно с информацией о неподтвержденном возрасте должно также всплывать блокируя тем самым доступ к контенту на любой странице.

Проверка введенных данных должна производится на стороне PHP.

#### Подготовка окружения: Ubuntu Linux версии 22.04
* Установим far manager командой в терминале sudo apt install mc вводим пароль.
* Установка сервера Mariadb командой ___sudo apt install mariadb-server___, подверждаем установку доп пакетов.
* Проверка осуществляется командой ___sudo mysql___ после этого попадем в режим терминала mysql.
* Установить апач командой ___sudo apt install apache2___, подверждаем установку доп пакетов.
* Проверка установки - открываем браузер и вводим localhost, откроется страница апача.
* Установка интерпретатора php. 
* Обновляем локальный список пакетов командой sudo apt update
* Установка интерпретатора php 
    * Добавим репозиторий с разными версиями интерпретатора php ___sudo add-apt-repository ppa:ondrej/php___.
    * Обновляем локальный список пакетов ___sudo apt update___.
    * Установим php версии 7.4. 
    * Команда ___sudo apt install php7.4___.
    * Установим доп модули ___sudo apt install php7.4-curl php7.4-xdebug php7.4-mysql php7.4-soap php7.4-zip php7.4-gd___.
    * Проверка устанвоки командой ___php -v___ покажет версию.
* Настройки виртуальных хостов:
    * Команада ___sudo mc___.
    * Переходим в _/etc/apache2/envars_, отредактируем файл с переменными. Нажимаем F4 выбираем редактор mcedit.
    * Изменяем директиву export APACHE_RUN_USER = имя пользователя (к примеру alexey)
    * Изменяем директиву export APACHE_RUN_GROUP = имя пользователя (к примеру alexey)
    * Сохраняем и выходим.
    * Отрываем директорию _sites-available_.
        * Копируем _000-default.conf_ в туже директорию под именем _age.devel.conf_
        * Открываем _age.devel.conf_
        * Раскомментируем и пропишем _ServerName age.devel_.
        * _DocumentRoot /home/[имя пользователя]/public_html/age.devel_.
        * Поменяем лог файлы _ErrorLog ${APACHE_LOG_DIR}/age.devel.error.log_.
        * Поменяем лог файлы _CustomLog ${APACHE_LOG_DIR}/age.devel.access.log combined_.
        * Сохраняем и выходим.
    * Копируем _age.devel.conf_ в туже директорию под именем _admin.devel.conf_.
    * Раскомментируем и пропишем _ServerName admin.devel_.
    * _DocumentRoot /home/[имя пользователя]/public_html/admin.devel_.
    * Поменяем лог файлы _ErrorLog ${APACHE_LOG_DIR}/admin.devel.error.log_.
    * Поменяем лог файлы _CustomLog ${APACHE_LOG_DIR}/admin.devel.access.log combined_.
    * Сохраняем и выходим.
    * Отключим виртаульные хост по умолчанию.
    * Команда ___sudo a2issite 000-default___.
    * Включим созданные виртуальные хосты.
    * Команда sudo a2ensite age.devel.
    * Команда sudo a2ensite admin.devel.
    * Открываем /etc/apache2/apache2.conf.
    * Поменять директорию с Directory /var/www на Directory /home/[имя пользователя]/public_html.
    * Поменять директиву на AllowOverride All.
    * Перезапустим апач.
    * Команда sudo systemctl reload apache2 если нет ошибок, значит все ок.
    * В файле etc/hosts пропишем адреса наших хостов.
        * _127.0.0.1 age.devel admin.devel_.
        * Сохраняем и выходим.
    * Идем в браузере набираем сайт age.devel и потом admin.devel.
    * Если будет ошибка доступа то ничего страшного.
    * Команда ___mc___.
    * Создадим директорию _public_html_ в _~/_.
    * В _~/public_html_ создадим директорию _age.devel_ и _admin.devel_.
    * Для проверки создать файл в admin.devel.
        * Команда touch index.php.
        * Добавим в файл ___<?php 
                                phpinfo();___
        * Сохраняем и выходим.
    * Идем в браузере набираем сайт admin.devel должна вывестись информации о php.
* Установка phpmyadmin.
    * Скачать дистрибьютив phpmyadmin с _www.phpmyadmin.net_
    * Распаковать содержимое в нашу директорию _admin.devel_.
    * Команда ___unzip [имя архива phpmyadmin]___.
    * Скопировать файлы в _admin.devel_.
    * Создать пользователя в базе данных
        * Команда ___sudo mysql___.
        * ___CREATE USER '[имя пользователя]'@'localhost' IDENTIFIED BY '[пароль ]';___
        * ___GARNT ALL PRIVILEGES ON *.* TO '[имя поьзователя]'@'localhost';___
        * FLUSH PRIVILEGES;
        * ___exit;___
    * Создадим базу данных для магазина cscart
        * Заходим под именем нашего пользователя
        * ___mysql -u alexandr -p___
        * Вводим пароль ___techsim___
        * Создаем базу данных
            * ___CREATE database last_project;___
        * exit;  
* Устанвока CScart
    * Скачать cscart ultimate ru 4.15.2
    * Распаковать в _age.devel_
    * В браузере перейти на страницу http://age.devel
    * Нажать _install_
    * Установить недостающие библиотеку указанные в списке.
    * Команад ___sudo apt install php7.4-xml___, по такому принципу установить др недостающие библиотеки.
    * Утсановить сервис _rewrite_ для апач командой ___sudo a2enmod rewrite___
    * Перезагрузить апач
        * ___sudo systemctl restart apache2___
    * Обновить страницу.
    * Впишем в поля конфигурации сервера cscart нашу базу данных Mysql: _age.devel_, имя пользовтаеля: _alexandr_ и пароль Mysql: _techsim_.
    * вписать эмаил адрес админа и пароль.
    * Нажать установить.
    * Активировать если есть лицензионный ключ.
    * Загрузить все файлы с ветки development  ([ссылка на репозиторий](https://github.com/alexanderIam/age.devel/tree/Development)) в нашу директорию age.devel
    * Перезапустить апач.
    * Читать функциональную часть.
    * Для тестирвоания использовался браузер Firefox Browser 109.(64-bit)
            
#### Функциональная часть:
* Зарегистрироваться от имени администратора.
* Зайти в _Admin panel > Add-ons > Manage add-ons_,установить модуль _Under Age_.
* Можно нажать на модуль и проверить настройки во вкладке _Settings_. Тут можно задать минимально допустимый возраст посетителей сайта и текст который будет выводиться в popup окне если посетитель не прошел проверку по возрасту.
* Выйти из браузера и открыть снова или открыть сайт http://age.devel во вкладке инкогнито.
* Поскольку пользователь не зарегистрирвован, после после авто перезагрузки страницы появится popup окно с просьбой ввести дату рождения
* После ввода данных нажать _submit_.
    * Если возраст пользователя больше установленного в настройках, попап окно исчезнет и пользователь сможет пользоваться сайтом. Иначе появится другое попап окно с предупреждающем сообщением из настроек модуля.
* Если пользователь зарегистрирован то то будет осуществлен запрос в БД. Для сравнения даты его рождения с минимально допустимым возрастом. Далее поведение сайта аналогично пункту выше.
